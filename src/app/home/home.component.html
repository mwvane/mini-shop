<div class="main-container">
  <div class="custom-header shadow">
    <div>
      <fa-icon [icon]="cartIcon" class="text-success"></fa-icon>
      [{{ cartItems.length }}]
    </div>
    <span class="mx-2"
      >{{ loggedUser.firstname }} {{ loggedUser.lastname }}</span
    >
    <a class="mx-2 text-decoration-none text-prymary" (click)="onLogout()"
      >logout</a
    >
  </div>
  <div class="row container">
    <div class="col-7 position-relative">
      <div class="items-container">
        <div *ngIf="!isItemsLoading && !items.length" class="text-center">
          <h3 style="color: #728498">პროდუქტების სია ცარიალია!</h3>
        </div>
        <div *ngIf="isItemsLoading" class="text-center">
          <div class="spinner-border text-primary"></div>
        </div>
        <div *ngIf="!isItemsLoading && items.length" class="row g-0">
          <div
            class="row g-0"
            style="font-weight: bold; font-size: 14px; color: #728498"
          >
            <div class="col-7">სახელი</div>
            <div class="col-2 text-center">რაოდენობა</div>
            <div class="col-1 text-center">ფასი</div>
            <div class="col text-center"></div>
          </div>
          <div>
            <div *ngIf="items">
              <app-item
                *ngFor="let item of items"
                [item]="item"
                [role]="loggedUser.role"
                (removeItem)="onRemoveItem($event)"
                (editItem)="onEditItem($event)"
                (addToCart)="onAddToCart(item)"
              ></app-item>
            </div>
            <button
              *ngIf="loggedUser.role == 'admin'"
              (click)="onCreateItem()"
              class="btn btn-warning btn-add shadow py-1"
            >
              <fa-icon [icon]="addIcon"></fa-icon> დამატება
            </button>
          </div>
        </div>
      </div>
    </div>
    <div class="col-5">
      <div class="cart-container">
        <div class="cart-header">
          <fa-icon [icon]="cartIcon" style="color: #67d965"></fa-icon>
          <span class="text-primary px-3">ჩემი კალათა</span>
        </div>
        <div class="cart-body p-2">
          <div *ngIf="!isCartLoading && !cartItems.length">
            <p>კალათა ცარიალია</p>
          </div>
          <div
            [ngClass]="isCartLoading ? 'spinner-border text-primary' : ''"
          ></div>
          <div *ngIf="!isCartLoading">
            <app-cart-item
              *ngFor="let item of cartItems"
              [cartItem]="item"
              (remove)="onCartItemDelete(item.id)"
              (change)="onCartItemChange($event, item)"
            ></app-cart-item>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
